Wrong code generated if mixing types in ternary operator
What steps will reproduce the problem? 1. Use Google Closure Compiler to compile this code:        var a =(Math.random()>0.5? '1' : 2 ) + 3 + 4;    You can either simple or advanced. It doesn't matter      What is the expected output? What do you see instead?   I'm seeing this as a result:      var a = (0.5 < Math.random() ? 1 : 2) + 7;    This is obviously wrong as the '1' string literal got converted to a number, and 3+4 got combined into 7 while that's not ok as '1' + 3 + 4 = '134', not '17'.    What version of the product are you using? On what operating system? Please provide any additional information below.   Seems like this issue happens only when you are mixing types together. If both 1 and 2 are string literals or if they are both numbers it won't happen. I was also a little surprised to see this happening in simple mode as it actually breaks the behavior.